
import Vue from 'vue'
import App from './App'


import router from './router'
import $ from 'jquery'
import 'babel-polyfill';
import { Vue2Dragula } from 'vue2-dragula'
import VueResource from 'vue-resource';
import axios from 'axios';
import Vuex from 'vuex';

import TXPlugin from './TXPlugin.js'
import store from '../src/vuex/store.js';
import iView from 'iview';
// import 'iview/dist/styles/iview.css';   // 使用 CSS
// import 'iview/dist/iview.min.js'

Vue.use(VueResource);
Vue.use(iView);
Vue.use(Vuex);
Vue.use(TXPlugin);
Vue.use(Vue2Dragula, {
  logging: {
    directive: true,
    plugin: true,
    service: true,
    dragHandler: true
  }
})

 Vue.prototype.axios = axios
Vue.http.interceptors.push((request, next) => {
  request.headers.set('Authorization', Auth)
  next(response => {
    return response
  })
})


// axios.interceptors.request.use(
//   (config)=>{
//     let user_token = sessionStorage.getItem('user_token');
//     if( user_token != null){
//       config.headers.common['Authorization'] ='Bearer'+' '+user_token;
//       return config;
//     }
//   }
// );

Vue.config.productionTip = false;
Vue.http.options.emulateJSON = true;
Vue.http.options.emulateHTTP = true;

new Vue({
  el: '#app',
  router, 
  render: h => h(App),
  store
})
